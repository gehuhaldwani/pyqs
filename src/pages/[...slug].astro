---
import { getCollection } from "astro:content";
import type { GetStaticPaths } from "astro";
import ExplorerLayout from "@/layouts/ExplorerLayout.astro";
import FileLayout from "@/layouts/FileLayout.astro";
import type { CollectionEntry } from "astro:content";

export const getStaticPaths: GetStaticPaths = async () => {
	const entries = await getCollection("fs");
	return entries.map((entry) => ({
		params: {
			slug: entry.data.path,
		},
		props: {
			entry: entry,
		},
	}));
};

interface Props {
	entry: CollectionEntry<"fs">;
}

const { entry } = Astro.props;
---

{entry.data.type === "dir" && <ExplorerLayout {entry} />}
{entry.data.type === "file" && <FileLayout {entry} />}
