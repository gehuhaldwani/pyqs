---
import { getCollection } from "astro:content";
import type { GetStaticPaths } from "astro";
import type { Entry } from "@/types/content";
import ExplorerLayout from "@/layouts/ExplorerLayout.astro";
import PdfViewer from "@/layouts/PdfViewer.astro";

export const getStaticPaths: GetStaticPaths = async () => {
	const entries = await getCollection("entry");
	return entries.map((entry) => ({
		params: {
			slug: entry.data.path.replace(/.pdf/g, ""),
		},
		props: {
			entry: entry.data,
		},
	}));
};

interface Props {
	entry: Entry;
}

const { entry } = Astro.props;
---

{entry.type === "dir" && <ExplorerLayout entry={entry} />}
{entry.type === "pdf" && <PdfViewer entry={entry} />}
